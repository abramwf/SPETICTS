{% extends "nav-bar.html" %}

{% block styleScript %}
    {% load static %}
    <script src="https://cdn.jsdelivr.net/npm/sweetalert2@11"></script>
{% endblock  %}

{% block content %}
    <div class="box">
        <div class="profile-pic-container">
            <div class="profile-pic">
                <img src="{% static 'media/image/WhatsApp Image 2024-05-16 at 03.39.27.jpeg' %}" alt="" srcset="">
            </div>
            <div class="profile-short-info">
                <h1>Hi, M. Farid Fatchur Rohmad!</h1>
            </div>
        </div>
        <div class="profile-content">
            <div class="web-info">
                <div class="project-header">
                    <h2>List of Projects</h2>
                    <a href="input"><button class="add-project">+ Add Project</button></a>
                </div>
                    {% if transcriptions|length > 0 %}
                        <div class="files">
                            {% for transcribe in transcriptions %}
                                <div class="file">
                                    <img src="{% static 'media/image/wcloud.webp' %}" alt="">
                                    <h3>{{ transcribe.title }}</h3>
                                    <p>{{ transcribe.trans_result|truncatewords:20 }}</p>
                                    <div class="del-more">
                                        <a href="{% url 'detil_view' transcribe.id %}">
                                            <p class="more">
                                                more <i class="bi bi-arrow-right-short" style="font-weight: bold;"></i>
                                            </p> 
                                        </a>
                                    </div>
                                </div>
                            {% endfor %}                    
                        </div>
                        <nav aria-label="Page navigation example">
                            <ul class="pagination justify-content-center">
                                {% if transcriptions.has_previous == False %}
                                    <li class="page-item disabled"><a class="page-link" href="#">&laquo First</a></li>
                                    <li class="page-item disabled"><a class="page-link" href="#">Previous</a></li>
                                {% else %}
                                    <li class="page-item"><a class="page-link" href="?page=1">&laquo First</a></li>
                                    <li class="page-item"><a class="page-link" href="?page={{ transcriptions.previous_page_number }}">Previous</a></li>
                                {% endif %}
                                
                                {% for i in nums %}
                                    <li class="page-item"><a class="page-link" href="?page={{ forloop.counter }}">{{ forloop.counter }}</a></li>
                                {% endfor %} 
            
                                {% if transcriptions.has_next %}
                                    <li class="page-item"><a class="page-link" href="?page={{ transcriptions.next_page_number }}">Next</a></li>
                                    <li class="page-item"><a class="page-link" href="?page={{ transcriptions.paginator.num_pages }}">Last &raquo</a></li>
                                {% else %}
                                    <li class="page-item disabled"><a class="page-link" href="#">Next</a></li>
                                    <li class="page-item disabled"><a class="page-link" href="#">Last &raquo</a></li>
                                {% endif %}
                            </ul>
                        </nav>
                    {% else %}
                        <div class="no-projects">
                            <img src="{% static 'media/image/NoProjects.svg' %}" style="height: 300px;">
                            <h4 class="no-projects-text" style="color: #a1b9d7; font-size: 18px; font-weight: 500; margin-bottom: 20px; align-self: center;">No Projects are Found . . .</h4>
                        </div>
                    {% endif %}
            </div>
        </div>
    </div>
    <script>
        {% if messages %}
            {% for message in messages %}
                Swal.fire({
                    title: "{{ message.tags|title }}",
                    text: "{{ message }}",
                    icon: "{{ message.tags }}",
                    timer: 2000
                });
            {% endfor %}
        {% endif %}
    </script>
{% endblock %}